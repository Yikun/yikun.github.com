##############################################################################
##############################################################################
###
### Running command:
###
###   /home/biocbuild/bbs-3.17-bioc/R/bin/R CMD check --install=check:AnnotationHub.install-out.txt --library=/home/biocbuild/bbs-3.17-bioc/R/library --timings AnnotationHub_3.7.1.tar.gz
###
##############################################################################
##############################################################################


* using log directory ‘/home/biocbuild/bbs-3.17-bioc/meat/AnnotationHub.Rcheck’
* using R Under development (unstable) (2023-01-14 r83615)
* using platform: aarch64-unknown-linux-gnu (64-bit)
* R was compiled by
    gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0
    GNU Fortran (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0
* running under: Ubuntu 22.04.1 LTS
* using session charset: UTF-8
* checking for file ‘AnnotationHub/DESCRIPTION’ ... OK
* checking extension type ... Package
* this is package ‘AnnotationHub’ version ‘3.7.1’
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ‘AnnotationHub’ can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking ‘build’ directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking dependencies in R code ... WARNING
'::' or ':::' imports not declared from:
  ‘CompoundDb’ ‘ensembldb’ ‘keras’
Unexported objects imported by ':::' calls:
  ‘BiocFileCache:::.get_tbl_rid’ ‘S4Vectors:::selectSome’
  See the note in ?`:::` about the use of this operator.
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... WARNING
checkRd: (5) AnnotationHub-class.Rd:134-142: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:151-154: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:155-158: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:159-162: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:163-166: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:167-171: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:172-178: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:179-213: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:215-217: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:219-221: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:223-225: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:234-238: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:239-243: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:244-250: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:251-272: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:273-281: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:282-287: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:288-293: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:300-304: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:305-309: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:310-321: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:322-325: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:326-329: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:330-337: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:338-345: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:346-351: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:358-362: \item in \describe must have non-empty label
checkRd: (5) AnnotationHub-class.Rd:363-367: \item in \describe must have non-empty label
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking files in ‘vignettes’ ... OK
* checking examples ... ERROR
Running examples in ‘AnnotationHub-Ex.R’ failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: AnnotationHub-objects
> ### Title: AnnotationHub objects and their related methods and functions
> ### Aliases: class:AnnotationHub AnnotationHub-class class:Hub Hub-class
> ###   .Hub AnnotationHub refreshHub mcols,Hub-method cache cache,Hub-method
> ###   cache,AnnotationHub-method cache<- cache<-,Hub-method hubUrl
> ###   hubUrl,Hub-method hubCache hubCache,Hub-method hubDate
> ###   hubDate,Hub-method package package,Hub-method removeCache isLocalHub
> ###   isLocalHub,Hub-method isLocalHub<- isLocalHub<-,Hub-method
> ###   possibleDates snapshotDate snapshotDate,Hub-method snapshotDate<-
> ###   snapshotDate<-,Hub-method removeResources
> ###   removeResources,missing-method removeResources,character-method
> ###   dbconn,Hub-method dbfile,Hub-method .db_close recordStatus
> ###   recordStatus,Hub-method length,Hub-method names,Hub-method
> ###   fileName,Hub-method $,Hub-method [[,Hub,character,missing-method
> ###   [[,Hub,numeric,missing-method [,Hub,character,missing-method
> ###   [,Hub,logical,missing-method [,Hub,numeric,missing-method
> ###   [<-,Hub,character,missing,Hub-method
> ###   [<-,Hub,logical,missing,Hub-method [<-,Hub,numeric,missing,Hub-method
> ###   subset,Hub-method query query,Hub-method display display,Hub-method
> ###   as.list.Hub as.list,Hub-method c,Hub-method show,Hub-method
> ###   show,AnnotationHubResource-method
> ### Keywords: classes methods
> 
> ### ** Examples
> 
>   ## create an AnnotationHub object
>   library(AnnotationHub)
>   ah = AnnotationHub()
snapshotDate(): 2022-12-16
> 
>   ## Summary of available records
>   ah
AnnotationHub with 67944 records
# snapshotDate(): 2022-12-16
# $dataprovider: Ensembl, BroadInstitute, UCSC, ftp://ftp.ncbi.nlm.nih.gov/g...
# $species: Homo sapiens, Mus musculus, Drosophila melanogaster, Bos taurus,...
# $rdataclass: GRanges, TwoBitFile, BigWigFile, EnsDb, Rle, OrgDb, ChainFile...
# additional mcols(): taxonomyid, genome, description,
#   coordinate_1_based, maintainer, rdatadateadded, preparerclass, tags,
#   rdatapath, sourceurl, sourcetype 
# retrieve records with, e.g., 'object[["AH5012"]]' 

             title                                       
  AH5012   | Chromosome Band                             
  AH5013   | STS Markers                                 
  AH5014   | FISH Clones                                 
  AH5015   | Recomb Rate                                 
  AH5016   | ENCODE Pilot                                
  ...        ...                                         
  AH109476 | Ensembl 108 EnsDb for Xiphophorus couchianus
  AH109477 | Ensembl 108 EnsDb for Xiphophorus maculatus 
  AH109478 | Ensembl 108 EnsDb for Xenopus tropicalis    
  AH109479 | Ensembl 108 EnsDb for Zonotrichia albicollis
  AH109480 | Ensembl 108 EnsDb for Zalophus californianus
> 
>   ## Detail for a single record
>   ah[1]
AnnotationHub with 1 record
# snapshotDate(): 2022-12-16
# names(): AH5012
# $dataprovider: UCSC
# $species: Homo sapiens
# $rdataclass: GRanges
# $rdatadateadded: 2013-03-26
# $title: Chromosome Band
# $description: GRanges object from UCSC track 'Chromosome Band'
# $taxonomyid: 9606
# $genome: hg19
# $sourcetype: UCSC track
# $sourceurl: rtracklayer://hgdownload.cse.ucsc.edu/goldenpath/hg19/database...
# $sourcesize: NA
# $tags: c("cytoBand", "UCSC", "track", "Gene", "Transcript",
#   "Annotation") 
# retrieve record with 'object[["AH5012"]]' 
> 
>   ## and what is the date we are using?
>   snapshotDate(ah)
[1] "2022-12-16"
> 
>   ## how many resources?
>   length(ah)
[1] 67944
> 
>   ## from which resources, is data available?
>   head(sort(table(ah$dataprovider), decreasing=TRUE))

                                                                                                   Ensembl 
                                                                                                     33054 
                                                                                            BroadInstitute 
                                                                                                     18248 
                                                                                                      UCSC 
                                                                                                     11192 
                                                                     ftp://ftp.ncbi.nlm.nih.gov/gene/DATA/ 
                                                                                                      1871 
                                                                                                  Haemcode 
                                                                                                       945 
FANTOM5,DLRP,IUPHAR,HPRD,STRING,SWISSPROT,TREMBL,ENSEMBL,CELLPHONEDB,BADERLAB,SINGLECELLSIGNALR,HOMOLOGENE 
                                                                                                       501 
> 
>   ## from which species, is data available ?
>   head(sort(table(ah$species),decreasing=TRUE))

           Homo sapiens            Mus musculus Drosophila melanogaster 
                  26552                    1796                     458 
             Bos taurus       Rattus norvegicus         Pan troglodytes 
                    331                     325                     317 
> 
>   ## what web service and local cache does this AnnotationHub point to?
>   hubUrl(ah)
[1] "https://annotationhub.bioconductor.org"
>   hubCache(ah)
[1] "/home/biocbuild/.cache/R/AnnotationHub"
> 
>   ### Examples ###
> 
>   ## One can  search the hub for multiple strings
>   ahs2 <- query(ah, c("GTF", "77","Ensembl", "Homo sapiens"))
> 
>   ## information about the file can be retrieved using
>   ahs2[1]
AnnotationHub with 1 record
# snapshotDate(): 2022-12-16
# names(): AH28812
# $dataprovider: Ensembl
# $species: Homo sapiens
# $rdataclass: GRanges
# $rdatadateadded: 2015-03-25
# $title: Homo_sapiens.GRCh38.77.gtf
# $description: Gene Annotation for Homo sapiens
# $taxonomyid: 9606
# $genome: GRCh38
# $sourcetype: GTF
# $sourceurl: ftp://ftp.ensembl.org/pub/release-77/gtf/homo_sapiens/Homo_sap...
# $sourcesize: 44454526
# $tags: c("GTF", "ensembl", "Gene", "Transcript", "Annotation") 
# retrieve record with 'object[["AH28812"]]' 
> 
>   ## one can further extract information from this show method
>   ## like the sourceurl using:
>   ahs2$sourceurl
[1] "ftp://ftp.ensembl.org/pub/release-77/gtf/homo_sapiens/Homo_sapiens.GRCh38.77.gtf.gz"
>   ahs2$description
[1] "Gene Annotation for Homo sapiens"
>   ahs2$title
[1] "Homo_sapiens.GRCh38.77.gtf"
> 
>   ## We can download a file by name like this (using a list semantic):
>   gr <- ahs2[[1]]
loading from cache
require(“GenomicRanges”)
Error: failed to load resource
  name: AH28812
  title: Homo_sapiens.GRCh38.77.gtf
  reason: error in evaluating the argument 'x' in selecting a method for function 'get': error reading from connection
Execution halted
* checking for unstated dependencies in ‘tests’ ... OK
* checking tests ...
  Running ‘runTests.R’
 ERROR
Running the tests in ‘tests/runTests.R’ failed.
Last 13 lines of output:
  
  Test files with failing tests
  
     test_cache.R 
       test_cache 
  
  
  Error in BiocGenerics:::testPackage("AnnotationHub") : 
    unit tests failed for package AnnotationHub
  In addition: Warning message:
  download failed
    hub path: 'bogus/url'
    cache resource: 'AHInvalid : 5012'
    reason: all(rtype == "web" | file.exists(fpath)) is not TRUE 
  Execution halted
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ‘inst/doc’ ... OK
* checking running R code from vignettes ...
  ‘AnnotationHub-HOWTO.Rmd’... OK
  ‘AnnotationHub.Rmd’ using ‘UTF-8’... OK
  ‘TroubleshootingTheCache.Rmd’ using ‘UTF-8’... OK
 NONE
* checking re-building of vignette outputs ... ERROR
Error(s) in re-building vignettes:
  ...
--- re-building ‘AnnotationHub-HOWTO.Rmd’ using rmarkdown
Killed
--- re-building ‘AnnotationHub.Rmd’ using rmarkdown
--- finished re-building ‘AnnotationHub.Rmd’

--- re-building ‘TroubleshootingTheCache.Rmd’ using rmarkdown
--- finished re-building ‘TroubleshootingTheCache.Rmd’

SUMMARY: processing the following file failed:
  ‘AnnotationHub-HOWTO.Rmd’

Error: Vignette re-building failed.
Execution halted

* checking PDF version of manual ... OK
* DONE

Status: 3 ERRORs, 2 WARNINGs
See
  ‘/home/biocbuild/bbs-3.17-bioc/meat/AnnotationHub.Rcheck/00check.log’
for details.

