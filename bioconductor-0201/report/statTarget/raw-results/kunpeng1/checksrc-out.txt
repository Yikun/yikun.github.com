##############################################################################
##############################################################################
###
### Running command:
###
###   /home/biocbuild/bbs-3.17-bioc/R/bin/R CMD check --install=check:statTarget.install-out.txt --library=/home/biocbuild/bbs-3.17-bioc/R/library --timings statTarget_1.29.1.tar.gz
###
##############################################################################
##############################################################################


* using log directory ‘/home/biocbuild/bbs-3.17-bioc/meat/statTarget.Rcheck’
* using R Under development (unstable) (2023-01-14 r83615)
* using platform: aarch64-unknown-linux-gnu (64-bit)
* R was compiled by
    gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0
    GNU Fortran (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0
* running under: Ubuntu 22.04.1 LTS
* using session charset: UTF-8
* checking for file ‘statTarget/DESCRIPTION’ ... OK
* checking extension type ... Package
* this is package ‘statTarget’ version ‘1.29.1’
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ‘statTarget’ can be installed ... OK
* checking installed package size ... OK
* checking package directory ... OK
* checking ‘build’ directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... NOTE
ComBat_qcFree: no visible global function definition for ‘model.matrix’
ComBat_qcFree: no visible binding for global variable ‘Beta.NA’
ComBat_qcFree: no visible global function definition for ‘dnorm’
ComBat_qcFree: no visible global function definition for ‘qqnorm’
ComBat_qcFree: no visible global function definition for ‘qqline’
oddRatio : logit_or: no visible global function definition for
  ‘relevel’
pvimPlot: no visible binding for global variable ‘GiniImportance’
pvimPlot: no visible binding for global variable ‘p.value’
shiftCor: no visible binding for global variable ‘QCspan’
shiftCor: no visible binding for global variable ‘degree’
shiftCor_dQC: no visible global function definition for ‘model.matrix’
Undefined global functions or variables:
  Beta.NA GiniImportance QCspan degree dnorm model.matrix p.value
  qqline qqnorm relevel
Consider adding
  importFrom("stats", "dnorm", "model.matrix", "qqline", "qqnorm",
             "relevel")
to your NAMESPACE file.
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking files in ‘vignettes’ ... OK
* checking examples ... ERROR
Running examples in ‘statTarget-Ex.R’ failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: shiftCor
> ### Title: shiftCor
> ### Aliases: shiftCor
> ### Keywords: Controls,Correction Quality
> 
> ### ** Examples
> 
> datpath <- system.file('extdata',package = 'statTarget')
> samPeno <- paste(datpath,'MTBLS79_sampleList.csv', sep='/')
> samFile <- paste(datpath,'MTBLS79.csv', sep='/')
> samPeno
[1] "/home/biocbuild/bbs-3.17-bioc/R/library/statTarget/extdata/MTBLS79_sampleList.csv"
> samFile
[1] "/home/biocbuild/bbs-3.17-bioc/R/library/statTarget/extdata/MTBLS79.csv"
> shiftCor(samPeno,samFile, MLmethod = 'QCRFSC', imputeM = 'KNN',coCV = 30)

statTarget: Signal Correction Start... Time: Thu Feb  2 21:47:01 2023 

* Step 1: Data File Checking Start..., Time:  Thu Feb  2 21:47:01 2023 

 Data Link 
 metaFile: /home/biocbuild/bbs-3.17-bioc/R/library/statTarget/extdata/MTBLS79_sampleList.csv 
 profileFile: /home/biocbuild/bbs-3.17-bioc/R/library/statTarget/extdata/MTBLS79.csv 

 172 Meta Samples vs 172 Profile samples
 The Meta samples list (*NA, missing data from the Profile File)

  [1] "batch01_QC01" "batch01_QC02" "batch01_QC03" "batch01_C05"  "batch01_S07" 
  [6] "batch01_C10"  "batch01_QC04" "batch01_S01"  "batch01_C03"  "batch01_S05" 
 [11] "batch01_C07"  "batch01_S06"  "batch01_QC05" "batch01_C08"  "batch01_C06" 
 [16] "batch01_S02"  "batch01_S09"  "batch01_QC06" "batch01_S04"  "batch01_C04" 
 [21] "batch01_S10"  "batch01_C09"  "batch01_QC07" "batch02_C05"  "batch02_S03" 
 [26] "batch02_S07"  "batch02_C01"  "batch02_C10"  "batch02_QC08" "batch02_S01" 
 [31] "batch02_C03"  "batch02_S05"  "batch02_C07"  "batch02_S06"  "batch02_QC09"
 [36] "batch02_C08"  "batch02_C06"  "batch02_S02"  "batch02_S09"  "batch02_C02" 
 [41] "batch02_QC10" "batch02_S04"  "batch02_S08"  "batch02_C04"  "batch02_S10" 
 [46] "batch02_C09"  "batch02_QC11" "batch03_C05"  "batch03_S03"  "batch03_S07" 
 [51] "batch03_C01"  "batch03_C10"  "batch03_QC12" "batch03_S01"  "batch03_C03" 
 [56] "batch03_S05"  "batch03_C07"  "batch03_S06"  "batch03_QC13" "batch03_C08" 
 [61] "batch03_C06"  "batch03_S02"  "batch03_S09"  "batch03_C02"  "batch03_QC14"
 [66] "batch03_S04"  "batch03_S08"  "batch03_C04"  "batch03_S10"  "batch03_C09" 
 [71] "batch03_QC15" "batch04_C05"  "batch04_S03"  "batch04_S07"  "batch04_C01" 
 [76] "batch04_QC16" "batch04_S01"  "batch04_S05"  "batch04_C07"  "batch04_S06" 
 [81] "batch04_QC17" "batch04_C08"  "batch04_C06"  "batch04_S02"  "batch04_S09" 
 [86] "batch04_C02"  "batch04_QC18" "batch04_S08"  "batch04_C04"  "batch04_S10" 
 [91] "batch04_QC19" "batch05_QC20" "batch05_S03"  "batch05_S07"  "batch05_C01" 
 [96] "batch05_C10"  "batch05_QC21" "batch05_S01"  "batch05_C03"  "batch05_C07" 
[101] "batch05_QC22" "batch05_C06"  "batch05_C02"  "batch05_QC23" "batch05_S04" 
[106] "batch05_S08"  "batch05_C04"  "batch05_QC24" "batch06_QC25" "batch06_S03" 
[111] "batch06_C10"  "batch06_QC26" "batch06_S01"  "batch06_C03"  "batch06_S05" 
[116] "batch06_C07"  "batch06_S06"  "batch06_QC27" "batch06_C08"  "batch06_C06" 
[121] "batch06_S02"  "batch06_C02"  "batch06_QC28" "batch06_S04"  "batch06_S08" 
[126] "batch06_C04"  "batch06_C09"  "batch06_QC29" "batch07_QC30" "batch07_C05" 
[131] "batch07_S03"  "batch07_S07"  "batch07_C01"  "batch07_C10"  "batch07_QC31"
[136] "batch07_C03"  "batch07_S05"  "batch07_C07"  "batch07_S06"  "batch07_QC32"
[141] "batch07_C08"  "batch07_S02"  "batch07_S09"  "batch07_C02"  "batch07_QC33"
[146] "batch07_S04"  "batch07_S08"  "batch07_S10"  "batch07_C09"  "batch07_QC34"
[151] "batch08_C05"  "batch08_S03"  "batch08_S07"  "batch08_C01"  "batch08_C10" 
[156] "batch08_QC36" "batch08_S01"  "batch08_C03"  "batch08_S05"  "batch08_C07" 
[161] "batch08_S06"  "batch08_QC37" "batch08_C08"  "batch08_S02"  "batch08_S09" 
[166] "batch08_QC38" "batch08_S04"  "batch08_S08"  "batch08_C04"  "batch08_S10" 
[171] "batch08_C09"  "batch08_QC39"

 Meta-information: 

  Class No.
1     1  66
2     2  68
3    QC  38
  Batch No.
1     1  91
2     2  17
3     3  20
4     4  44

 Metabolic profile information: 

               no.
QC and samples 172
Metabolites     48

* Step 2: Evaluation of Missing Value... 

 The number of missing value before QC based signal correction:  336
 The number of filtered variables using the modified  80 % rule :   6 

* Step 3: Imputation start... 

 The imputation method was set at 'KNN'
 The number of missing value after imputation:  0
 Imputation Finished! 
 
* Step 4: QC-based Signal Correction Start... Time:  Thu Feb  2 21:47:01 2023 

 The Signal Correction method was set at QC-RFSC 

  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |==                                                                    |   2%
  |                                                                            
  |===                                                                   |   5%
  |                                                                            
  |=====                                                                 |   7%
  |                                                                            
  |=======                                                               |  10%
  |                                                                            
  |=========                                                             |  12%
  |                                                                            
  |==========                                                            |  15%
  |                                                                            
  |============                                                          |  17%
  |                                                                            
  |==============                                                        |  20%
  |                                                                            
  |===============                                                       |  22%
  |                                                                            
  |=================                                                     |  24%
  |                                                                            
  |===================                                                   |  27%
  |                                                                            
  |====================                                                  |  29%
  |                                                                            
  |======================                                                |  32%
  |                                                                            
  |========================                                              |  34%
  |                                                                            
  |==========================                                            |  37%
  |                                                                            
  |===========================                                           |  39%
  |                                                                            
  |=============================                                         |  41%
  |                                                                            
  |===============================                                       |  44%
  |                                                                            
  |================================                                      |  46%
  |                                                                            
  |==================================                                    |  49%
  |                                                                            
  |====================================                                  |  51%
  |                                                                            
  |======================================                                |  54%
  |                                                                            
  |=======================================                               |  56%
  |                                                                            
  |=========================================                             |  59%
  |                                                                            
  |===========================================                           |  61%
  |                                                                            
  |============================================                          |  63%
  |                                                                            
  |==============================================                        |  66%
  |                                                                            
  |================================================                      |  68%
  |                                                                            
  |==================================================                    |  71%
  |                                                                            
  |===================================================                   |  73%
  |                                                                            
  |=====================================================                 |  76%
  |                                                                            
  |=======================================================               |  78%
  |                                                                            
  |========================================================              |  80%
  |                                                                            
  |==========================================================            |  83%
  |                                                                            
  |============================================================          |  85%
  |                                                                            
  |=============================================================         |  88%
  |                                                                            
  |===============================================================       |  90%
  |                                                                            
  |=================================================================     |  93%
  |                                                                            
  |===================================================================   |  95%
  |                                                                            
  |====================================================================  |  98%
  |                                                                            
  |======================================================================| 100%

 Calculation of CV distribution of raw peaks (QC)...

            CV<5%   CV<10%   CV<15%   CV<20%   CV<25%   CV<30%   CV<35%
Batch_1  4.761905 50.00000 71.42857 78.57143 85.71429 92.85714 95.23810
Batch_2 21.428571 69.04762 80.95238 80.95238 92.85714 95.23810 95.23810
Batch_3 11.904762 45.23810 78.57143 83.33333 85.71429 92.85714 97.61905
Batch_4  7.142857 64.28571 78.57143 83.33333 92.85714 92.85714 95.23810
Total    0.000000 19.04762 38.09524 66.66667 69.04762 78.57143 80.95238
           CV<40%    CV<45%    CV<50%    CV<55%    CV<60% CV<65% CV<70% CV<75%
Batch_1  95.23810  97.61905 100.00000 100.00000 100.00000    100    100    100
Batch_2  95.23810  95.23810  97.61905  97.61905  97.61905    100    100    100
Batch_3  97.61905 100.00000 100.00000 100.00000 100.00000    100    100    100
Batch_4 100.00000 100.00000 100.00000 100.00000 100.00000    100    100    100
Total    80.95238  85.71429  88.09524  95.23810 100.00000    100    100    100
        CV<80% CV<85% CV<90% CV<95% CV<100%
Batch_1    100    100    100    100     100
Batch_2    100    100    100    100     100
Batch_3    100    100    100    100     100
Batch_4    100    100    100    100     100
Total      100    100    100    100     100

 Calculation of CV distribution of corrected peaks (QC)...

Warning in dir.create(dirout.w) :
  '/home/biocbuild/bbs-3.17-bioc/meat/statTarget.Rcheck/statTarget/shiftCor/RSDresult' already exists
           CV<5%   CV<10%   CV<15%   CV<20%   CV<25%    CV<30%    CV<35%
Batch_1 45.23810 76.19048 85.71429 92.85714  95.2381  95.23810 100.00000
Batch_2 40.47619 78.57143 85.71429 92.85714  95.2381  95.23810  95.23810
Batch_3 11.90476 66.66667 80.95238 88.09524  95.2381  97.61905  97.61905
Batch_4 30.95238 71.42857 85.71429 97.61905 100.0000 100.00000 100.00000
Total   26.19048 73.80952 90.47619 95.23810  95.2381  97.61905 100.00000
           CV<40% CV<45% CV<50% CV<55% CV<60% CV<65% CV<70% CV<75% CV<80%
Batch_1 100.00000    100    100    100    100    100    100    100    100
Batch_2  97.61905    100    100    100    100    100    100    100    100
Batch_3 100.00000    100    100    100    100    100    100    100    100
Batch_4 100.00000    100    100    100    100    100    100    100    100
Total   100.00000    100    100    100    100    100    100    100    100
        CV<85% CV<90% CV<95% CV<100%
Batch_1    100    100    100     100
Batch_2    100    100    100     100
Batch_3    100    100    100     100
Batch_4    100    100    100     100
Total      100    100    100     100

* Step 5:  Removal of the features (CV% > 30%) Thu Feb  2 21:47:03 2023 

 No. of removed features: 1
 Feature name: 386.21715 

 Output Link: /home/biocbuild/bbs-3.17-bioc/meat/statTarget.Rcheck 

 Correction Finished! Time:  Thu Feb  2 21:47:03 2023 

 #################################### 
 # Software Version: statTarget 2.0 + # 
 # Email: hemi.luan@gmail.com # 
 #################################### 
Error in shiftCor(samPeno, samFile, MLmethod = "QCRFSC", imputeM = "KNN",  : 
  object 'QCspan' not found
Execution halted
* checking for unstated dependencies in ‘tests’ ... OK
* checking tests ...
  Running ‘testthat.R’
 ERROR
Running the tests in ‘tests/testthat.R’ failed.
Complete output:
  > library(testthat)
  > library(statTarget)
  > #library(statTarget)
  > datpath <- system.file("extdata",package = "statTarget")
  > samPeno <- paste(datpath,"MTBLS79_sampleList.csv", sep="/")
  > samFile <- paste(datpath,"MTBLS79.csv", sep="/")
  > file <- paste(datpath,"data_example_two_groups.csv", sep="/")
  > #statAnalysis(file, Frule = 0.8,imputeM = "KNN", glog = TRUE, test.multi=TRUE, nvarRF =10, scaling = "Pareto",silt = 500, pcax = 1, pcay = 2) 
  > shiftCor(samPeno,samFile,Frule = 0.8,QCspan = 0.75, degree = 2,imputeM = "KNN")
  Error in shiftCor(samPeno, samFile, Frule = 0.8, QCspan = 0.75, degree = 2,  : 
    unused arguments (QCspan = 0.75, degree = 2)
  Execution halted
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ‘inst/doc’ ... OK
* checking running R code from vignettes ...
  ‘Combat.Rmd’ using ‘UTF-8’... OK
  ‘pathway_analysis.Rmd’ using ‘UTF-8’... OK
  ‘statTarget.Rmd’ using ‘UTF-8’... OK
 NONE
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* DONE

Status: 2 ERRORs, 1 NOTE
See
  ‘/home/biocbuild/bbs-3.17-bioc/meat/statTarget.Rcheck/00check.log’
for details.

