##############################################################################
##############################################################################
###
### Running command:
###
###   /home/biocbuild/bbs-3.17-bioc/R/bin/R CMD check --install=check:ChromSCape.install-out.txt --library=/home/biocbuild/bbs-3.17-bioc/R/library --timings ChromSCape_1.9.0.tar.gz
###
##############################################################################
##############################################################################


* using log directory ‘/home/biocbuild/bbs-3.17-bioc/meat/ChromSCape.Rcheck’
* using R Under development (unstable) (2023-01-14 r83615)
* using platform: aarch64-unknown-linux-gnu (64-bit)
* R was compiled by
    gcc (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0
    GNU Fortran (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0
* running under: Ubuntu 22.04.1 LTS
* using session charset: UTF-8
* checking for file ‘ChromSCape/DESCRIPTION’ ... OK
* this is package ‘ChromSCape’ version ‘1.9.0’
* package encoding: UTF-8
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for hidden files and directories ... NOTE
Found the following hidden files and directories:
  .BBSoptions
These were most likely included in error. See section ‘Package
structure’ in the ‘Writing R Extensions’ manual.
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ‘ChromSCape’ can be installed ... OK
* used C++ compiler: ‘g++ (Ubuntu 11.3.0-1ubuntu1~22.04) 11.3.0’
* checking installed package size ... NOTE
  installed size is  5.4Mb
  sub-directories of 1Mb or more:
    data   1.5Mb
    www    2.1Mb
* checking package directory ... OK
* checking ‘build’ directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking dependencies in R code ... WARNING
'library' or 'require' call not declared from: ‘dplyr’
'library' or 'require' call to ‘dplyr’ in package code.
  Please use :: or requireNamespace() instead.
  See section 'Suggested packages' in the 'Writing R Extensions' manual.
* checking S3 generic/method consistency ... WARNING
Killed
See section ‘Generic functions and methods’ in the ‘Writing R
Extensions’ manual.
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... NOTE
Killed
* checking Rd files ... NOTE
prepare_Rd: raw_counts_to_sparse_matrix.Rd:6-8: Dropping empty section \source
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... WARNING
Codoc mismatches from documentation object 'generate_analysis':
generate_analysis
  Code: function(input_data_folder, analysis_name = "Analysis_1",
                 output_directory = "./", input_data_type = c("scBED",
                 "DenseMatrix", "SparseMatrix", "scBAM")[1],
                 feature_count_on = c("bins", "genebody", "peaks")[1],
                 feature_count_parameter = 50000, rebin_sparse_matrix =
                 FALSE, ref_genome = c("hg38", "mm10")[1], run =
                 c("filter", "CNA", "cluster", "consensus", "coverage",
                 "DA", "GSA", "report")[c(1, 3, 5, 6, 7, 8)],
                 min_reads_per_cell = 1000, max_quantile_read_per_cell
                 = 99, n_top_features = 40000, norm_type = "CPM",
                 subsample_n = NULL, exclude_regions = NULL, n_clust =
                 NULL, corr_threshold = 99, percent_correlation = 1,
                 maxK = 10, qval.th = 0.1, logFC.th = 1,
                 enrichment_qval = 0.1, doBatchCorr = FALSE, batch_sels
                 = NULL, control_samples_CNA = NULL, genes_to_plot =
                 c("Krt8", "Krt5", "Tgfb1", "Foxq1", "Cdkn2b",
                 "Cdkn2a", "chr7:15000000-20000000"))
  Docs: function(input_data_folder, analysis_name = "Analysis_1",
                 output_directory = "./", input_data_type = c("scBED",
                 "DenseMatrix", "SparseMatrix", "scBAM")[1],
                 rebin_sparse_matrix = FALSE, feature_count_on =
                 c("bins", "genebody", "peaks")[1],
                 feature_count_parameter = 50000, ref_genome =
                 c("hg38", "mm10")[1], run = c("filter", "CNA",
                 "cluster", "consensus", "peak_call", "coverage", "DA",
                 "GSA", "report")[c(1, 3, 6, 7, 8, 9)],
                 min_reads_per_cell = 1000, max_quantile_read_per_cell
                 = 99, n_top_features = 40000, norm_type = "CPM",
                 subsample_n = NULL, exclude_regions = NULL, n_clust =
                 NULL, corr_threshold = 99, percent_correlation = 1,
                 maxK = 10, qval.th = 0.1, logFC.th = 1,
                 enrichment_qval = 0.1, doBatchCorr = FALSE, batch_sels
                 = NULL, control_samples_CNA = NULL, genes_to_plot =
                 c("Krt8", "Krt5", "Tgfb1", "Foxq1", "Cdkn2b",
                 "Cdkn2a", "chr7:15000000-20000000"))
  Mismatches in argument names:
    Position: 5 Code: feature_count_on Docs: rebin_sparse_matrix
    Position: 6 Code: feature_count_parameter Docs: feature_count_on
    Position: 7 Code: rebin_sparse_matrix Docs: feature_count_parameter
  Mismatches in argument default values:
    Name: 'run'
    Code: c("filter", "CNA", "cluster", "consensus", "coverage", "DA", 
          "GSA", "report")[c(1, 3, 5, 6, 7, 8)]
    Docs: c("filter", "CNA", "cluster", "consensus", "peak_call", "coverage", 
          "DA", "GSA", "report")[c(1, 3, 6, 7, 8, 9)]

* checking Rd \usage sections ... WARNING
Undocumented arguments in documentation object 'rebin_matrix'
  ‘rebin_function’

Functions with \usage entries need to have the appropriate \alias
entries, and all their arguments documented.
The \usage entries must correspond to syntactically valid R code.
See chapter ‘Writing R documentation files’ in the ‘Writing R
Extensions’ manual.
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking contents of ‘data’ directory ... OK
* checking data for non-ASCII characters ... OK
* checking data for ASCII and uncompressed saves ... OK
* checking line endings in C/C++/Fortran sources/headers ... OK
* checking compiled code ... NOTE
Note: information on .o files is not available
* checking files in ‘vignettes’ ... OK
* checking examples ... ERROR
Running examples in ‘ChromSCape-Ex.R’ failed
The error most likely occurred in:

> base::assign(".ptime", proc.time(), pos = "CheckExEnv")
> ### Name: enrich_TF_ChEA3_scExp
> ### Title: Find the TF that are enriched in the differential genes using
> ###   ChEA3 database
> ### Aliases: enrich_TF_ChEA3_scExp
> 
> ### ** Examples
> 
> data("scExp")
> 
> scExp = enrich_TF_ChEA3_scExp(
+  scExp,
+  ref = "hg38",
+  qval.th = 0.01,
+  logFC.th = 1,
+  min.percent = 0.01)
TF enrichment for C1...
TF enrichment for C2...
Killed
* checking for unstated dependencies in ‘tests’ ... OK
* checking tests ...
  Running ‘testthat.R’
 ERROR
Running the tests in ‘tests/testthat.R’ failed.
Complete output:
  > library(testthat)
  > library(ChromSCape)
  > 
  > test_check("ChromSCape")
  Killed
* checking for unstated dependencies in vignettes ... OK
* checking package vignettes in ‘inst/doc’ ... OK
* checking running R code from vignettes ...
  ‘vignette.Rmd’ using ‘UTF-8’... OK
 NONE
* checking re-building of vignette outputs ... OK
* checking PDF version of manual ... OK
* DONE

Status: 2 ERRORs, 4 WARNINGs, 5 NOTEs
See
  ‘/home/biocbuild/bbs-3.17-bioc/meat/ChromSCape.Rcheck/00check.log’
for details.

